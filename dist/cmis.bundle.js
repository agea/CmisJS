!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("cross-fetch/polyfill"),require("isomorphic-base64"),require("isomorphic-form-data"),require("url-search-params-polyfill"));else if("function"==typeof define&&define.amd)define(["cross-fetch/polyfill","isomorphic-base64","isomorphic-form-data","url-search-params-polyfill"],e);else{var o="object"==typeof exports?e(require("cross-fetch/polyfill"),require("isomorphic-base64"),require("isomorphic-form-data"),require("url-search-params-polyfill")):e(t["cross-fetch/polyfill"],t.window,t.window,t["url-search-params-polyfill"]);for(var r in o)("object"==typeof exports?exports:t)[r]=o[r]}}("undefined"!=typeof self?self:this,function(t,e,o,r){return function(t){var e={};function o(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,o),i.l=!0,i.exports}return o.m=t,o.c=e,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=0)}([function(t,e,o){"use strict";(function(t){var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),o(2);var n=o(3);o(4),o(5),function(e){var o=t.Buffer,r=function(){return function(){this.succinct=!0}}(),s=function(t){function e(e){var o=t.call(this,e.statusText)||this;return o.response=e,o}return i(e,t),e}(Error);e.HTTPError=s;var c=function(){function t(t){this.options={succinct:!0},this.url=t}return t.prototype.setProperties=function(t,e){var o=0;for(var r in e){t["propertyId["+o+"]"]=r;var i=e[r];if(null!=i)if("[object Array]"==Object.prototype.toString.apply(i))for(var n=i,s=0;s<n.length;s++)t["propertyValue["+o+"]["+s+"]"]=n[s];else t["propertyValue["+o+"]"]=i;o++}},t.prototype.setPolicies=function(t,e){for(var o=0;o<e.length;o++)t["policy["+o+"]"]=e[o]},t.prototype.setACEs=function(t,e,o){var r=0;for(var i in e){t[o+"ACEPrincipal["+r+"]"]=i;for(var n=e[i],s=0;s<n.length;s++)t[o+"ACEPermission["+r+"]["+s+"]"]=e[i][s];r++}},t.prototype.setSecondaryTypeIds=function(t,e,o){for(var r=0;r<e.length;r++)t[o+"SecondaryTypeId["+r+"]"]=e[r]},t.prototype.http=function(t,e,r,i){var c,p=this,u={};for(var a in this.options)null!=this.options[a]&&void 0!==this.options[a]&&(u[a]=this.options[a]);for(var a in r)null!=r[a]&&void 0!==r[a]&&(u[a]=r[a]);this.username&&this.password?c="Basic "+n.btoa(this.username+":"+this.password):this.token&&(c="Bearer "+this.token);var d={method:t};if(c?d.headers={Authorization:c}:d.credentials="include",i){var l=new FormData,h=i.content;for(var a in"string"==typeof h?"undefined"!=typeof Blob&&(h=new Blob([h])):void 0!==o&&(h=new o(h)),l.append("content",h,i.mimeTypeExtension?i.filename+"."+i.mimeTypeExtension:i.filename),u)l.append(a,""+u[a]);this.charset&&l.append("_charset_",this.charset),d.body=l}else{var f=new URLSearchParams;for(var a in u)f.set(a,u[a]);"GET"!==t?(d.body=f.toString(),d.headers["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8"):e=e+"?"+f.toString()}var y=fetch(e,d).then(function(t){if(t.status<200||t.status>299)throw new s(t);return t});return this.errorHandler&&y.catch(function(t){return p.errorHandler(t)}),y},t.prototype.get=function(t,e){return this.http("GET",t,e)},t.prototype.post=function(t,e,o){return this.http("POST",t,e,o)},t.prototype.setToken=function(t){return this.token=t,this},t.prototype.setCredentials=function(t,e){return this.username=t,this.password=e,this},t.prototype.setCharset=function(t){return this.charset=t,this},t.prototype.setErrorHandler=function(t){this.errorHandler=t},t.prototype.loadRepositories=function(){var t=this;return this.get(this.url,this.options).then(function(e){return e.json().then(function(e){for(var o in e){t.defaultRepository=e[o];break}t.repositories=e})})},t.prototype.getRepositoryInfo=function(){return this.get(this.defaultRepository.repositoryUrl,{cmisselector:"repositoryInfo"}).then(function(t){return t.json()})},t.prototype.getTypeChildren=function(t,e,o){void 0===o&&(o={});var r=o;return r.cmisselector="typeChildren",r.typeId=t,r.includePropertyDefinitions=e,this.get(this.defaultRepository.repositoryUrl,r).then(function(t){return t.json()})},t.prototype.getTypeDescendants=function(t,e,o){return this.get(this.defaultRepository.repositoryUrl,{cmisselector:"typeDescendants",typeId:t,includePropertyDefinitions:o,depth:e}).then(function(t){return t.json()})},t.prototype.getTypeDefinition=function(t){return this.get(this.defaultRepository.repositoryUrl,{cmisselector:"typeDefinition",typeId:t}).then(function(t){return t.json()})},t.prototype.getCheckedOutDocs=function(t,e){void 0===e&&(e={});var o=e;return o.cmisselector="checkedOut",this.get(this.defaultRepository.repositoryUrl,o).then(function(t){return t.json()})},t.prototype.query=function(t,e,o){void 0===e&&(e=!1),void 0===o&&(o={});var r=o;return r.cmisaction="query",r.statement=t,r.searchAllVersions=e,this.post(this.defaultRepository.repositoryUrl,r).then(function(t){return t.json()})},t.prototype.createType=function(t){return this.post(this.defaultRepository.repositoryUrl,{cmisaction:"createType",type:JSON.stringify(t)}).then(function(t){return t.json()})},t.prototype.updateType=function(t){return this.post(this.defaultRepository.repositoryUrl,{cmisaction:"updateType",type:JSON.stringify(t)}).then(function(t){return t.json()})},t.prototype.deleteType=function(t){return this.post(this.defaultRepository.repositoryUrl,{cmisaction:"deleteType",typeId:JSON.stringify(t)}).then(function(t){return t.json()})},t.prototype.getObjectByPath=function(t,e){void 0===e&&(e={});var o=e;o.cmisselector="object";for(var r=t.split("/"),i=r.length-1;i>=0;i--)r[i]=encodeURIComponent(r[i]);return this.get(this.defaultRepository.rootFolderUrl+r.join("/"),o).then(function(t){return t.json()})},t.prototype.getObject=function(t,e,o){void 0===o&&(o={});var r=o;return r.cmisselector="object",r.objectId=t,r.returnVersion=e,this.get(this.defaultRepository.rootFolderUrl,r).then(function(t){return t.json()})},t.prototype.createFolder=function(t,e,o,i,n,s){void 0===o&&(o="cmis:folder"),void 0===i&&(i=[]),void 0===n&&(n={}),void 0===s&&(s={});var c=new r;c.objectId=t,c.repositoryId=this.defaultRepository.repositoryId,c.cmisaction="createFolder";var p={"cmis:name":e,"cmis:objectTypeId":o};return this.setProperties(c,p),this.setPolicies(c,i),this.setACEs(c,n,"add"),this.setACEs(c,s,"remove"),this.post(this.defaultRepository.rootFolderUrl,c).then(function(t){return t.json()})},t.prototype.getChildren=function(t,e){void 0===e&&(e={});var o=e;return o.cmisselector="children",o.objectId=t,this.get(this.defaultRepository.rootFolderUrl,o).then(function(t){return t.json()})},t.prototype.getDescendants=function(t,e,o){void 0===o&&(o={});var r=o;return r.cmisselector="descendants",e&&(r.depth=e),r.objectId=t,this.get(this.defaultRepository.rootFolderUrl,r).then(function(t){return t.json()})},t.prototype.getFolderTree=function(t,e,o){void 0===o&&(o={});var r=o;return r.cmisselector="folderTree",e&&(r.depth=e),r.objectId=t,this.get(this.defaultRepository.rootFolderUrl,r).then(function(t){return t.json()})},t.prototype.getFolderParent=function(t,e){void 0===e&&(e={});var o=e;return o.cmisselector="parent",o.objectId=t,this.get(this.defaultRepository.rootFolderUrl,o).then(function(t){return t.json()})},t.prototype.getParents=function(t,e){void 0===e&&(e={});var o=e;return o.cmisselector="parents",o.objectId=t,this.get(this.defaultRepository.rootFolderUrl,o).then(function(t){return t.json()})},t.prototype.getAllowableActions=function(t,e){void 0===e&&(e={});var o=e;return o.cmisselector="allowableActions",o.objectId=t,this.get(this.defaultRepository.rootFolderUrl,o).then(function(t){return t.json()})},t.prototype.getProperties=function(t,e,o){void 0===o&&(o={});var r=o;return r.cmisselector="properties",r.objectId=t,r.returnVersion=e,this.get(this.defaultRepository.rootFolderUrl,r).then(function(t){return t.json()})},t.prototype.updateProperties=function(t,e,o){void 0===o&&(o={});var r=o;return r.objectId=t,r.cmisaction="update",this.setProperties(o,e),this.post(this.defaultRepository.rootFolderUrl,r).then(function(t){return t.json()})},t.prototype.moveObject=function(t,e,o,r){void 0===r&&(r={});var i=r;return i.objectId=t,i.cmisaction="move",i.targetFolderId=o,i.sourceFolderId=e,this.post(this.defaultRepository.rootFolderUrl,i).then(function(t){return t.json()})},t.prototype.createDocument=function(t,e,o,r,i,n,s,c,p){void 0===p&&(p={});var u=p;"string"==typeof o&&(o={"cmis:name":o});var a=o||{};return a["cmis:objectTypeId"]||(a["cmis:objectTypeId"]="cmis:document"),i&&(u.versioningState=i),u.objectId=t,this.setProperties(u,a),n&&this.setPolicies(u,n),s&&this.setACEs(u,s,"add"),c&&this.setACEs(u,c,"remove"),u.repositoryId=this.defaultRepository.repositoryId,u.cmisaction="createDocument",this.post(this.defaultRepository.rootFolderUrl,u,{content:e,filename:a["cmis:name"],mimeTypeExtension:r}).then(function(t){return t.json()})},t.prototype.bulkUpdateProperties=function(t,e,o,i){void 0===e&&(e={}),void 0===o&&(o=[]),void 0===i&&(i=[]);for(var n=new r,s=t.length-1;s>=0;s--)n["objectId["+s+"]"]=t[s];return n.objectIds=t,this.setProperties(n,e),this.setSecondaryTypeIds(n,o,"add"),this.setSecondaryTypeIds(n,i,"remove"),n.cmisaction="bulkUpdate",this.post(this.defaultRepository.repositoryUrl,n).then(function(t){return t.json()})},t.prototype.getContentStream=function(t,e,o){void 0===e&&(e="inline");var i=new r;return i.cmisselector="content",i.objectId=t,i.download=e?"attachment":"inline",this.get(this.defaultRepository.rootFolderUrl,i)},t.prototype.createDocumentFromSource=function(t,e,o,r,i,n,s,c,p,u){void 0===u&&(u={});var a=u;"string"==typeof r&&(r={"cmis:name":r});var d=r||{};d["cmis:objectTypeId"]||(d["cmis:objectTypeId"]="cmis:document"),n&&(a.versioningState=n),a.objectId=t,this.setProperties(a,d),s&&this.setPolicies(a,s),c&&this.setACEs(a,c,"add"),p&&this.setACEs(a,p,"remove"),a.repositoryId=this.defaultRepository.repositoryId,a.sourceId=e,a.cmisaction="createDocumentFromSource";var l=null;return o&&(l={content:o,filename:d["cmis:name"],mimeTypeExtension:i}),this.post(this.defaultRepository.rootFolderUrl,a,l).then(function(t){return t.json()})},t.prototype.getContentStreamURL=function(t,e,o){void 0===e&&(e="inline");var i=new r;i.cmisselector="content",i.objectId=t,i.download=e,i.streamId=o;var n=new URLSearchParams;for(var s in i)null!=i[s]&&void 0!==i[s]&&n.append(s,i[s]);for(var s in this.options)n.has(s)||null==this.options[s]||void 0===this.options[s]||n.append(s,this.options[s]);return this.defaultRepository.rootFolderUrl+"?"+n.toString()},t.prototype.getRenditions=function(t,e){void 0===e&&(e={renditionFilter:"*"});var o=e;return o.cmisselector="renditions",o.objectId=t,this.get(this.defaultRepository.rootFolderUrl,o).then(function(t){return t.json()})},t.prototype.checkOut=function(t,e){void 0===e&&(e={});var o=e;return o.objectId=t,o.cmisaction="checkOut",this.post(this.defaultRepository.rootFolderUrl,o).then(function(t){return t.json()})},t.prototype.cancelCheckOut=function(t){var e=new r;return e.objectId=t,e.cmisaction="cancelCheckOut",this.post(this.defaultRepository.rootFolderUrl,e)},t.prototype.checkIn=function(t,e,o,r,i,n,s,c,p,u){void 0===e&&(e=!1),void 0===u&&(u={});var a=u;"string"==typeof o&&(o={"cmis:name":o});var d=o||{};return n&&(a.checkinComment=n),a.major=e,a.objectId=t,this.setProperties(a,d),s&&this.setPolicies(a,s),c&&this.setACEs(a,c,"add"),p&&this.setACEs(a,p,"remove"),a.cmisaction="checkIn",this.post(this.defaultRepository.rootFolderUrl,a,{content:r,mimeTypeExtension:i,filename:d["cmis:name"]}).then(function(t){return t.json()})},t.prototype.getObjectOfLatestVersion=function(t,e){void 0===e&&(e={major:!1});var o=e;return o.cmisselector="object",o.objectId=t,o.versionSeriesId=t,o.major=e.major,this.get(this.defaultRepository.rootFolderUrl,o).then(function(t){return t.json()})},t.prototype.setContentStream=function(t,e,o,r,i){void 0===o&&(o=!1),void 0===i&&(i={});var n=i;return n.objectId=t,n.overwriteFlag=o,n.cmisaction="setContent",this.post(this.defaultRepository.rootFolderUrl,n,{content:e,filename:r}).then(function(t){return t.json()})},t.prototype.appendContentStream=function(t,e,o,r,i){void 0===o&&(o=!1),void 0===i&&(i={});var n=i;return n.objectId=t,n.cmisaction="appendContent",n.isLastChunk=o,this.post(this.defaultRepository.rootFolderUrl,n,{content:e,filename:r}).then(function(t){return t.json()})},t.prototype.deleteContentStream=function(t,e){void 0===e&&(e={});var o=e;return o.objectId=t,o.cmisaction="deleteContent",this.post(this.defaultRepository.rootFolderUrl,o)},t.prototype.getAllVersions=function(t,e){void 0===e&&(e={});var o=e;return o.versionSeriesId=t,o.cmisselector="versions",this.get(this.defaultRepository.rootFolderUrl,o)},t.prototype.getAppliedPolicies=function(t,e){void 0===e&&(e={});var o=e;return o.objectId=t,o.cmisselector="policies",this.get(this.defaultRepository.rootFolderUrl,o).then(function(t){return t.json()})},t.prototype.getACL=function(t,e){void 0===e&&(e=!1);var o=new r;return o.objectId=t,o.onlyBasicPermissions=e,o.cmisselector="acl",this.get(this.defaultRepository.rootFolderUrl,o).then(function(t){return t.json()})},t.prototype.deleteObject=function(t,e){void 0===e&&(e=!1);var o=new r;return o.repositoryId=this.defaultRepository.repositoryId,o.cmisaction="delete",o.objectId=t,o.allVersions=e,this.post(this.defaultRepository.rootFolderUrl,o)},t.prototype.deleteTree=function(t,e,o,i){void 0===e&&(e=!1),void 0===i&&(i=!1);var n=new r;return n.repositoryId=this.defaultRepository.repositoryId,n.cmisaction="deleteTree",n.objectId=t,n.allVersions=!!e,o&&(n.unfileObjects=o),n.continueOnFailure=i,this.post(this.defaultRepository.rootFolderUrl,n)},t.prototype.getContentChanges=function(t,e,o,r,i){void 0===e&&(e=!1),void 0===o&&(o=!1),void 0===r&&(r=!1),void 0===i&&(i={});var n=i;return n.cmisselector="contentChanges",t&&(n.changeLogToken=t),n.includeProperties=e,n.includePolicyIds=o,n.includeACL=r,this.get(this.defaultRepository.repositoryUrl,n).then(function(t){return t.json()})},t.prototype.createRelationship=function(t,e,o,r,i){void 0===i&&(i={});var n=i;return this.setProperties(n,t),e&&this.setPolicies(n,e),o&&this.setACEs(n,o,"add"),r&&this.setACEs(n,r,"remove"),n.cmisaction="createRelationship",this.post(this.defaultRepository.repositoryUrl,n).then(function(t){return t.json()})},t.prototype.createPolicy=function(t,e,o,r,i,n){void 0===n&&(n={});var s=n;return s.objectId=t,this.setProperties(s,e),o&&this.setPolicies(s,o),r&&this.setACEs(s,r,"add"),i&&this.setACEs(s,i,"remove"),s.cmisaction="createPolicy",this.post(this.defaultRepository.repositoryUrl,s).then(function(t){return t.json()})},t.prototype.createItem=function(t,e,o,r,i,n){void 0===n&&(n={});var s=n;return s.objectId=t,this.setProperties(s,e),o&&this.setPolicies(s,o),r&&this.setACEs(s,r,"add"),i&&this.setACEs(s,i,"remove"),s.cmisaction="createItem",this.post(this.defaultRepository.repositoryUrl,s).then(function(t){return t.json()})},t.prototype.getLastResult=function(){return this.post(this.defaultRepository.repositoryUrl,{cmisaction:"lastResult"}).then(function(t){return t.json()})},t.prototype.addObjectToFolder=function(t,e,o,r){void 0===o&&(o=!1),void 0===r&&(r={});var i=r;return i.objectId=t,i.cmisaction="addObjectToFolder",i.allVersions=o,i.folderId=e,this.post(this.defaultRepository.rootFolderUrl,i).then(function(t){return t.json()})},t.prototype.removeObjectFromFolder=function(t,e,o){void 0===o&&(o={});var r=o;return r.objectId=t,r.cmisaction="removeObjectFromFolder",r.folderId=e,this.post(this.defaultRepository.rootFolderUrl,r).then(function(t){return t.json()})},t.prototype.getObjectRelationships=function(t,e,o,r,i){void 0===e&&(e=!1),void 0===i&&(i={});var n=i;return n.objectId=t,n.includeSubRelationshipTypes=e,n.relationshipDirection=o||"either",r&&(n.typeId=r),n.cmisselector="relationships",this.get(this.defaultRepository.rootFolderUrl,n).then(function(t){return t.json()})},t.prototype.applyPolicy=function(t,e,o){void 0===o&&(o={});var r=o;return r.objectId=t,r.policyId=e,r.cmisaction="applyPolicy",this.post(this.defaultRepository.rootFolderUrl,r).then(function(t){return t.json()})},t.prototype.removePolicy=function(t,e,o){void 0===o&&(o={});var r=o;return r.objectId=t,r.policyId=e,r.cmisaction="removePolicy",this.post(this.defaultRepository.rootFolderUrl,r).then(function(t){return t.json()})},t.prototype.applyACL=function(t,e,o,i){var n=new r;return n.objectId=t,n.cmisaction="applyACL",n.propagation=i,e&&this.setACEs(n,e,"add"),o&&this.setACEs(n,o,"remove"),this.post(this.defaultRepository.rootFolderUrl,n).then(function(t){return t.json()})},t}();e.CmisSession=c}(e.cmis||(e.cmis={}))}).call(e,o(1))},function(t,e){var o;o=function(){return this}();try{o=o||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(o=window)}t.exports=o},function(e,o){e.exports=t},function(t,o){t.exports=e},function(t,e){t.exports=o},function(t,e){t.exports=r}])});